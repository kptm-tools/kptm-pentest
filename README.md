# KPTM Tools

## The Integration repository

This is actually the project code repository — The final picture of the code. It represents each code from each microservice in a specific version and also the development environment. This repo will be cloned in order to get the code and set up the local environment in order to develop with its files and dockers.

## Setup

To set up the local environment:


1. Clone the repo with submodules
```bash
git clone –-recursive <link-to-integration-repo>
```

2. Set up environment variables and utils.
```bash
cp .env.example .env
cp utils/fusionauth/kickstart/kickstart.example.json utils/fusionauth/kickstart/kickstart.json
```

3. Run docker-compose
```bash
docker compose up --build
```

### Reset Volumes and Containers

In some cases, you may want to start the `fusionauth` service and kickstart from scratch. For this, stop and remove containers by running:

```bash
docker compose down -v
```

## Updating Submodules

To update all submodules, run:

`git submodule update --remote --recursive
`
### Make git automatically update submodules: 

```bash
git config submodule.recurse true
```

`submodule.recurse true` makes submodules automatically update when you `git pull`, `git checkout`, etc. In other words, it makes submodules automatically point to whatever they are supposed to point to. It’s only available in git 2.14 and newer.

[Demystifying git submodules](https://www.cyberdemon.org/2024/03/20/submodules.html)

### If you already cloned but forgot `--recursive`

In case your submodules appear empty, or you forgot the `--recursive` flag when cloning the repo, you can fix that by running the following command:

```bash
git submodule update --init --recursive
```
